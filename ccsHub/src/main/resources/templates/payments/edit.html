<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Payment</title>
</head>
<body>
    <h1>Edit Payment</h1>

    <form th:action="@{/payments/edit(paymentId=${paymentId})}" th:object="${paymentDto}" method="post">
        <label>User:</label>
        <select th:field="*{userId}">
            <option th:each="user : ${users}" 
                    th:value="${user.userId}" 
                    th:text="${user.username}"
                    th:selected="${user.userId == paymentDto.userId}"></option>
        </select><br/>

        <label>Event (optional):</label>
        <select th:field="*{eventId}">
            <option value="">-- None --</option>
            <option th:each="event : ${events}" 
                    th:value="${event.eventId}" 
                    th:text="${event.title}"
                    th:selected="${event.eventId == paymentDto.eventId}"></option>
        </select><br/>

        <label>Merchandise (optional):</label>
        <select th:field="*{merchandiseId}">
            <option value="">-- None --</option>
            <option th:each="merch : ${merchandiseList}" 
                    th:value="${merch.id}" 
                    th:text="${merch.name}"
                    th:selected="${merch.id == paymentDto.merchandiseId}"></option>
        </select><br/>

        <label>Amount:</label>
        <input type="number" th:field="*{amount}" step="1" required/><br/>

        <label>Status:</label>
        <input type="text" th:field="*{status}" required/><br/>

        <button type="submit">Update Payment</button>
    </form>

    <a href="/payments">Back to Payments</a>
</body>
</html>
